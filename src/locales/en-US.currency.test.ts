import { expect, it } from 'vitest'
import { formatCurrency, parseCurrency } from '../format/currency'

it('parsing zero values', () => {
  expect(parseCurrency('$')).toBe(0)
  expect(parseCurrency('$0')).toBe(0)
  expect(parseCurrency('0.$')).toBe(0)
  expect(parseCurrency('$.0')).toBe(0)
  expect(parseCurrency('0$.0')).toBe(Number.NaN)
  expect(parseCurrency('000.$')).toBe(0)
  expect(parseCurrency(',000.$')).toBe(0)
  expect(parseCurrency('.000$')).toBe(0)
  expect(parseCurrency('$000.000')).toBe(0)
  expect(parseCurrency('$,000.000')).toBe(0)
})

it('formatting zero values', () => {
  expect(formatCurrency('$')).toBe('$0.00')
  expect(formatCurrency('0$')).toBe('$0.00')
  expect(formatCurrency('$0.')).toBe('$0.00')
  expect(formatCurrency('$.0')).toBe('$0.00')
  expect(formatCurrency('$0.0')).toBe('$0.00')
  expect(formatCurrency('$000.')).toBe('$0.00')
  expect(formatCurrency('$,000.')).toBe('$0.00')
  expect(formatCurrency('$.000')).toBe('$0.00')
  expect(formatCurrency('$000.000')).toBe('$0.00')
  expect(formatCurrency('$,000.000')).toBe('$0.00')

  expect(formatCurrency(0)).toBe('$0.00')
})

it('parsing zero values represented in scientific notation', () => {
  expect(parseCurrency('$0e+0 USD')).toBe(0)
  expect(parseCurrency('$0.e+0 USD')).toBe(0)
  expect(parseCurrency('$.0e+0 USD')).toBe(0)
  expect(parseCurrency('$0.0e+0 USD')).toBe(0)
  expect(parseCurrency('$000.e+6 USD')).toBe(0)
  expect(parseCurrency('$,000.e+6 USD')).toBe(0)
  expect(parseCurrency('$.000e+6 USD')).toBe(0)
  expect(parseCurrency('$000.000e+6 USD')).toBe(0)
  expect(parseCurrency('$,000.000e+6 USD')).toBe(0)

  expect(parseCurrency('$0e-0')).toBe(0)
  expect(parseCurrency('$0.e-0')).toBe(0)
  expect(parseCurrency('$.0e-0')).toBe(0)
  expect(parseCurrency('$0.0e-0')).toBe(0)
  expect(parseCurrency('$000.e-6')).toBe(0)
  expect(parseCurrency('$,000.e-6')).toBe(0)
  expect(parseCurrency('$.000e-6')).toBe(0)
  expect(parseCurrency('$000.000e-6')).toBe(0)
  expect(parseCurrency('$,000.000e-6')).toBe(0)
})

it('formatting zero values represented in scientific notation', () => {
  expect(formatCurrency('0e+0')).toBe('$0.00')
  expect(formatCurrency('0.e+0')).toBe('$0.00')
  expect(formatCurrency('.0e+0')).toBe('$0.00')
  expect(formatCurrency('0.0e+0')).toBe('$0.00')
  expect(formatCurrency('000.e+6')).toBe('$0.00')
  expect(formatCurrency(',000.e+6')).toBe('$0.00')
  expect(formatCurrency('.000e+6')).toBe('$0.00')
  expect(formatCurrency('000.000e+6')).toBe('$0.00')
  expect(formatCurrency(',000.000e+6')).toBe('$0.00')

  expect(formatCurrency('0e-0')).toBe('$0.00')
  expect(formatCurrency('0.e-0')).toBe('$0.00')
  expect(formatCurrency('.0e-0')).toBe('$0.00')
  expect(formatCurrency('0.0e-0')).toBe('$0.00')
  expect(formatCurrency('000.e-6')).toBe('$0.00')
  expect(formatCurrency(',000.e-6')).toBe('$0.00')
  expect(formatCurrency('.000e-6')).toBe('$0.00')
  expect(formatCurrency('000.000e-6')).toBe('$0.00')
  expect(formatCurrency(',000.000e-6')).toBe('$0.00')

  expect(formatCurrency(0e+6)).toBe('$0.00')
  expect(formatCurrency(0e-6)).toBe('$0.00')
  expect(formatCurrency(0.e+6)).toBe('$0.00')
})

it('parseing negative zero values', () => {
  expect(parseCurrency('-$0')).toBe(-0)
  expect(parseCurrency('-$0.')).toBe(-0)
  expect(parseCurrency('-$.0')).toBe(-0)
  expect(parseCurrency('-$0.0')).toBe(-0)
  expect(parseCurrency('-$000.')).toBe(-0)
  expect(parseCurrency('-$,000.')).toBe(-0)
  expect(parseCurrency('-$.000')).toBe(-0)
  expect(parseCurrency('-$000.000')).toBe(-0)
  expect(parseCurrency('-$,000.000')).toBe(-0)
})

it('formatting negative zero values', () => {
  expect(formatCurrency('$-0')).toBe('-$0.00')
  expect(formatCurrency('$-0.')).toBe('-$0.00')
  expect(formatCurrency('$-.0')).toBe('-$0.00')
  expect(formatCurrency('$-0.0')).toBe('-$0.00')
  expect(formatCurrency('$-000.')).toBe('-$0.00')
  expect(formatCurrency('$-,000.')).toBe('-$0.00')
  expect(formatCurrency('$-.000')).toBe('-$0.00')
  expect(formatCurrency('$-000.000')).toBe('-$0.00')
  expect(formatCurrency('$-,000.000')).toBe('-$0.00')

  expect(formatCurrency(-0)).toBe('-$0.00')
  expect(formatCurrency(-0.0)).toBe('-$0.00')
})

it('parseing negative zero values represented in scientific notation', () => {
  expect(parseCurrency('USD -$0e+0')).toBe(-0)
  expect(parseCurrency('USD -$0.e+0')).toBe(-0)
  expect(parseCurrency('USD -$.0e+0')).toBe(-0)
  expect(parseCurrency('USD -$0.0e+0')).toBe(-0)
  expect(parseCurrency('USD -$000.e+6')).toBe(-0)
  expect(parseCurrency('USD -$,000.e+6')).toBe(-0)
  expect(parseCurrency('USD -$.000e+6')).toBe(-0)
  expect(parseCurrency('USD -$000.000e+6')).toBe(-0)
  expect(parseCurrency('USD -$,000.000e+6')).toBe(-0)

  expect(parseCurrency('$ -0e-0 USD')).toBe(-0)
  expect(parseCurrency('$ -0.e-0 USD')).toBe(-0)
  expect(parseCurrency('$ -.0e-0 USD')).toBe(-0)
  expect(parseCurrency('$ -0.0e-0 USD')).toBe(-0)
  expect(parseCurrency('$ -000.e-6 USD')).toBe(-0)
  expect(parseCurrency('$ -,000.e-6 USD')).toBe(-0)
  expect(parseCurrency('$ -.000e-6 USD')).toBe(-0)
  expect(parseCurrency('$ -000.000e-6 USD')).toBe(-0)
  expect(parseCurrency('$ -,000.000e-6 USD')).toBe(-0)
})

it('formatting negative zero values represented in scientific notation', () => {
  expect(formatCurrency('-0e+0')).toBe('-$0.00')
  expect(formatCurrency('-0.e+0')).toBe('-$0.00')
  expect(formatCurrency('-.0e+0')).toBe('-$0.00')
  expect(formatCurrency('-0.0e+0')).toBe('-$0.00')
  expect(formatCurrency('-000.e+6')).toBe('-$0.00')
  expect(formatCurrency('-,000.e+6')).toBe('-$0.00')
  expect(formatCurrency('-.000e+6')).toBe('-$0.00')
  expect(formatCurrency('-000.000e+6')).toBe('-$0.00')
  expect(formatCurrency('-,000.000e+6')).toBe('-$0.00')

  expect(formatCurrency('-0e-0')).toBe('-$0.00')
  expect(formatCurrency('-0.e-0')).toBe('-$0.00')
  expect(formatCurrency('-.0e-0')).toBe('-$0.00')
  expect(formatCurrency('-0.0e-0')).toBe('-$0.00')
  expect(formatCurrency('-000.e-6')).toBe('-$0.00')
  expect(formatCurrency('-,000.e-6')).toBe('-$0.00')
  expect(formatCurrency('-.000e-6')).toBe('-$0.00')
  expect(formatCurrency('-000.000e-6')).toBe('-$0.00')
  expect(formatCurrency('-,000.000e-6')).toBe('-$0.00')

  expect(formatCurrency(-0.e-0)).toBe('-$0.00')
  expect(formatCurrency(-0.000000e+6)).toBe('-$0.00')
})

it('parseing small values', () => {
  expect(parseCurrency('$1')).toBe(1)
  expect(parseCurrency('$0001')).toBe(1)
  expect(parseCurrency('$0,001')).toBe(1)
  expect(parseCurrency('$0000001')).toBe(1)
  expect(parseCurrency('$0,000,001')).toBe(1)
  expect(parseCurrency('$.0001')).toBe(0.0001)
  expect(parseCurrency('$0.0001')).toBe(0.0001)
  expect(parseCurrency('$000.0001')).toBe(0.0001)
  expect(parseCurrency('$,000.0001')).toBe(0.0001)
  expect(parseCurrency('$.000000001')).toBe(0.000000001)
  expect(parseCurrency('$0.000000001')).toBe(0.000000001)
  expect(parseCurrency('$000000000.000000001')).toBe(0.000000001)
  expect(parseCurrency('$000,000,000.000000001')).toBe(0.000000001)
})

it('formatting small values', () => {
  expect(formatCurrency('1')).toBe('$1.00')
  expect(formatCurrency('0001')).toBe('$1.00')
  expect(formatCurrency('0,001')).toBe('$1.00')
  expect(formatCurrency('0000001')).toBe('$1.00')
  expect(formatCurrency('0,000,001')).toBe('$1.00')
  expect(formatCurrency('.0001')).toBe('$0.00')
  expect(formatCurrency('0.0001')).toBe('$0.00')
  expect(formatCurrency('000.0001')).toBe('$0.00')
  expect(formatCurrency(',000.0001')).toBe('$0.00')
  expect(formatCurrency('.000000001')).toBe('$0.00')
  expect(formatCurrency('0.000000001')).toBe('$0.00')
  expect(formatCurrency('000000000.000000001')).toBe('$0.00')
  expect(formatCurrency('000,000,000.000000001')).toBe('$0.00')

  expect(formatCurrency(1)).toBe('$1.00')
  expect(formatCurrency(0.1)).toBe('$0.10')
  expect(formatCurrency(0.189)).toBe('$0.19')
  expect(formatCurrency(0.999)).toBe('$1.00')
  expect(formatCurrency(0.000000001)).toBe('$0.00')
})

it('parseing small values represented in scientific notation', () => {
  expect(parseCurrency('$.1e-3')).toBe(0.0001)
  expect(parseCurrency('$0.1e-3')).toBe(0.0001)
  expect(parseCurrency('$000.1e-3')).toBe(0.0001)
  expect(parseCurrency('$,000.1e-3')).toBe(0.0001)
  expect(parseCurrency('$.1e-8')).toBe(0.000000001)
  expect(parseCurrency('$0.1e-8')).toBe(0.000000001)
  expect(parseCurrency('$000000000.1e-8')).toBe(0.000000001)
  expect(parseCurrency('$000,000,000.1e-8')).toBe(0.000000001)
})

it('formatting small values represented in scientific notation', () => {
  expect(formatCurrency('$.1e-3')).toBe('$0.00')
  expect(formatCurrency('$0.1e-3')).toBe('$0.00')
  expect(formatCurrency('$000.1e-3')).toBe('$0.00')
  expect(formatCurrency('$,000.1e-3')).toBe('$0.00')
  expect(formatCurrency('$.1e-8')).toBe('$0.00')
  expect(formatCurrency('$0.1e-8')).toBe('$0.00')
  expect(formatCurrency('$000000000.1e-8')).toBe('$0.00')
  expect(formatCurrency('$000,000,000.1e-8')).toBe('$0.00')

  expect(formatCurrency(0.01e+2)).toBe('$1.00')
  expect(formatCurrency(0.01999e+2)).toBe('$2.00')
  expect(formatCurrency(0.1e-8)).toBe('$0.00')
})

it('parseing negative small values', () => {
  expect(parseCurrency('-$1')).toBe(-1)
  expect(parseCurrency('-$0001')).toBe(-1)
  expect(parseCurrency('-$0,001')).toBe(-1)
  expect(parseCurrency('-$0000001')).toBe(-1)
  expect(parseCurrency('-$0,000,001')).toBe(-1)
  expect(parseCurrency('-$.0001')).toBe(-0.0001)
  expect(parseCurrency('-$0.0001')).toBe(-0.0001)
  expect(parseCurrency('-$000.0001')).toBe(-0.0001)
  expect(parseCurrency('-$,000.0001')).toBe(-0.0001)
  expect(parseCurrency('-$.000000001')).toBe(-0.000000001)
  expect(parseCurrency('-$0.000000001')).toBe(-0.000000001)
  expect(parseCurrency('-$000000000.000000001')).toBe(-0.000000001)
  expect(parseCurrency('-$000,000,000.000000001')).toBe(-0.000000001)
})

it('formatting negative small values', () => {
  expect(formatCurrency('-$1')).toBe('-$1.00')
  expect(formatCurrency('-$0001')).toBe('-$1.00')
  expect(formatCurrency('-$0,001')).toBe('-$1.00')
  expect(formatCurrency('-$0000001')).toBe('-$1.00')
  expect(formatCurrency('-$0,000,001')).toBe('-$1.00')
  expect(formatCurrency('-.$0001')).toBe('')
  expect(formatCurrency('-$0.0001')).toBe('-$0.00')
  expect(formatCurrency('-$000.0001')).toBe('-$0.00')
  expect(formatCurrency('-,$000.0001')).toBe('')
  expect(formatCurrency('-.$000000001')).toBe('')
  expect(formatCurrency('-$0.000000001')).toBe('-$0.00')
  expect(formatCurrency('-$000000000.000000001')).toBe('-$0.00')
  expect(formatCurrency('-$000,000,000.000000001')).toBe('-$0.00')

  expect(formatCurrency(-1)).toBe('-$1.00')
  expect(formatCurrency(-1.0045)).toBe('-$1.00')
  expect(formatCurrency(-1.0056)).toBe('-$1.01')
})

it('parseing negative small values represented in scientific notation', () => {
  expect(parseCurrency('-$100e-2')).toBe(-1)
  expect(parseCurrency('-$000100e-2')).toBe(-1)
  expect(parseCurrency('-$000,100e-2')).toBe(-1)
  expect(parseCurrency('-$000000100e-2')).toBe(-1)
  expect(parseCurrency('-$000,000,100e-2')).toBe(-1)
  expect(parseCurrency('-$.1e-3')).toBe(-0.0001)
  expect(parseCurrency('-$0.1e-3')).toBe(-0.0001)
  expect(parseCurrency('-$.1e-8')).toBe(-0.000000001)
  expect(parseCurrency('-$0.1e-8')).toBe(-0.000000001)
  expect(parseCurrency('-$000000000.1e-8')).toBe(-0.000000001)
  expect(parseCurrency('-$000,000,000.1e-8')).toBe(-0.000000001)
})

it('formatting negative small values represented in scientific notation', () => {
  expect(formatCurrency('-100e-2')).toBe('-$1.00')
  expect(formatCurrency('-000100e-2')).toBe('-$1.00')
  expect(formatCurrency('-000,100e-2')).toBe('-$1.00')
  expect(formatCurrency('-000000100e-2')).toBe('-$1.00')
  expect(formatCurrency('-000,000,100e-2')).toBe('-$1.00')
  expect(formatCurrency('-.1e-3')).toBe('-$0.00')
  expect(formatCurrency('-0.1e-3')).toBe('-$0.00')
  expect(formatCurrency('-.1e-8')).toBe('-$0.00')
  expect(formatCurrency('-0.1e-8')).toBe('-$0.00')
  expect(formatCurrency('-000000000.1e-8')).toBe('-$0.00')
  expect(formatCurrency('-000,000,000.1e-8')).toBe('-$0.00')
})

it('parseing large values', () => {
  expect(parseCurrency('$ 1000')).toBe(1000)
  expect(parseCurrency('$ 1,000')).toBe(1000)
  expect(parseCurrency('$ 100000')).toBe(100000)
  expect(parseCurrency('$ ,100,000')).toBe(100000)
  expect(parseCurrency('$ 10000000')).toBe(10000000)
  expect(parseCurrency('$ 10,000,000')).toBe(10000000)
  expect(parseCurrency('$ 999999999999')).toBe(999999999999)
  expect(parseCurrency('$ ,999,999,999,999')).toBe(999999999999)
})

it('formatting large values', () => {
  expect(formatCurrency('1000')).toBe('$1,000.00')
  expect(formatCurrency('1,000')).toBe('$1,000.00')
  expect(formatCurrency('100000')).toBe('$100,000.00')
  expect(formatCurrency(',100,000')).toBe('$100,000.00')
  expect(formatCurrency('10000000')).toBe('$10,000,000.00')
  expect(formatCurrency('10,000,000')).toBe('$10,000,000.00')
  expect(formatCurrency('999999999999')).toBe('$999,999,999,999.00')
  expect(formatCurrency(',999,999,999,999')).toBe('$999,999,999,999.00')

  expect(formatCurrency(',999,999,999,999.999')).toBe('$1,000,000,000,000.00')
  expect(formatCurrency(999999999999.999)).toBe('$1,000,000,000,000.00')
})

it('parseing large values represented in scientific notation', () => {
  expect(parseCurrency('$1e+3')).toBe(1000)
  expect(parseCurrency('$10e+2')).toBe(1000)
  expect(parseCurrency('$100e+1')).toBe(1000)
  expect(parseCurrency('$100,000e+2')).toBe(10000000)
  expect(parseCurrency('$,100,000e+2')).toBe(10000000)
  expect(parseCurrency('$1e+12')).toBe(1000000000000)
})

it('formatting large values represented in scientific notation', () => {
  expect(formatCurrency('$1e+3', 0)).toBe('$1,000')
  expect(formatCurrency('$10e+2', 0)).toBe('$1,000')
  expect(formatCurrency('$100e+1', 0)).toBe('$1,000')
  expect(formatCurrency('$100,000e+2', 0)).toBe('$10,000,000')
  expect(formatCurrency('$,100,000e+2', 0)).toBe('$10,000,000')
  expect(formatCurrency('$1e+12', 0)).toBe('$1,000,000,000,000')
})

it('parseing negative large values', () => {
  expect(parseCurrency('$-1000')).toBe(-1000)
  expect(parseCurrency('$-1,000')).toBe(-1000)
  expect(parseCurrency('$-100000')).toBe(-100000)
  expect(parseCurrency('$-,100,000')).toBe(-100000)
  expect(parseCurrency('$-10000000')).toBe(-10000000)
  expect(parseCurrency('$-10,000,000')).toBe(-10000000)
  expect(parseCurrency('$-999999999999')).toBe(-999999999999)
  expect(parseCurrency('$-,999,999,999,999')).toBe(-999999999999)
})

it('formatting negative large values', () => {
  expect(formatCurrency('-$1000', 3)).toBe('-$1,000.000')
  expect(formatCurrency('-$1,000', 3)).toBe('-$1,000.000')
  expect(formatCurrency('-$100000', 3)).toBe('-$100,000.000')
  expect(formatCurrency('-$,100,000', 3)).toBe('-$100,000.000')
  expect(formatCurrency('-$10000000', 3)).toBe('-$10,000,000.000')
  expect(formatCurrency('-$10,000,000', 3)).toBe('-$10,000,000.000')
  expect(formatCurrency('-$999999999999', 3)).toBe('-$999,999,999,999.000')
  expect(formatCurrency('-$,999,999,999,999', 3)).toBe('-$999,999,999,999.000')
})

it('parseing negative large values represented in scientific notation', () => {
  expect(parseCurrency('$ -1e+3')).toBe(-1000)
  expect(parseCurrency('$ -10e+2')).toBe(-1000)
  expect(parseCurrency('$ -100e+1')).toBe(-1000)
  expect(parseCurrency('$ -100,000e+2')).toBe(-10000000)
  expect(parseCurrency('$ -,100,000e+2')).toBe(-10000000)
  expect(parseCurrency('$ -1e+12')).toBe(-1000000000000)
})

it('formatting negative large values represented in scientific notation', () => {
  expect(formatCurrency('$-1e+3')).toBe('-$1,000.00')
  expect(formatCurrency('$-10e+2')).toBe('-$1,000.00')
  expect(formatCurrency('$-100e+1')).toBe('-$1,000.00')
  expect(formatCurrency('$-100,000e+2')).toBe('-$10,000,000.00')
  expect(formatCurrency('$-,100,000e+2')).toBe('-$10,000,000.00')
  expect(formatCurrency('$-1e+12')).toBe('-$1,000,000,000,000.00')
})
